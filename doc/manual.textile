
@src/main/webapp/WEB-INF/web.xml@ 

pre.. 
<web-app ...>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:/uApprove.xml;</param-value>
    </context-param>
    
    ...
    
    <filter>
        <filter-name>uApprove</filter-name>
        <filter-class>ch.SWITCH.aai.uApprove.Intercepter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>uApprove</filter-name>
        <url-pattern>/profile/*</url-pattern>
    </filter-mapping>
    
    <servlet>
        <servlet-name>uApprove - Terms Of Use</servlet-name>
        <servlet-class>ch.SWITCH.aai.uApprove.tou.ToUServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>uApprove - Terms Of Use</servlet-name>
        <url-pattern>/uApprove/terms-of-use.html</url-pattern>
    </servlet-mapping>
    
    <servlet>
        <servlet-name>uApprove - Attribute Release Consent</servlet-name>
        <servlet-class>ch.SWITCH.aai.uApprove.consent.ConsentServlet</servlet-class>
    </servlet>
    
    <servlet-mapping>
        <servlet-name>uApprove - Attribute Release Consent</servlet-name>
        <url-pattern>/uApprove/attribute-release-consent.html</url-pattern>
    </servlet-mapping>

</web-app>


h3. ToU Schema:

pre.. 
CREATE TABLE ToUAcceptance (
    userId              VARCHAR(256)                                NOT NULL,
    version             VARCHAR(256)                                NOT NULL,
    fingerprint         VARCHAR(256)                                NOT NULL,
    acceptanceDate      TIMESTAMP       DEFAULT CURRENT_TIMESTAMP   NOT NULL,
    
    PRIMARY KEY (userId, version)
);


